import 'dart:async';
import 'package:flutter/material.dart';
import 'package:web_socket_channel/io.dart';

class GetWebsocket extends StatefulWidget{
  final String connectionString;
  GetWebsocket({ Key key, this.connectionString }) : super(key: key);

  factory GetWebsocket.withExample() {
    return GetWebsocket(
      connectionString: 'ws://10.0.2.2:9081',
    );
  }

  @override
  _GetWebsocketState createState()=>  _GetWebsocketState();
}


class _GetWebsocketState extends State<GetWebsocket> {

  IOWebSocketChannel channel;

  @override
  void initState() {
    channel = IOWebSocketChannel.connect(widget.connectionString);
    super.initState();
  }

  @override
  void dispose() {
    Future<dynamic> close = channel.sink.close();
    close.then((onValue) => {
    });
    super.dispose();
  }

  @override
  Widget build(BuildContext context){
    return Scaffold(
      body: Text('Socket Example')
    );
  }
}